<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\Resep;

class ResepSeeder extends Seeder
{
    public function run(): void
    {
        $data = [
            [
                'id' => 2,
                'id_cabang' => 1,
                'nama_resep' => 'Resep Burger Sapi 1',
                'produk_id' => 37,
                'deskripsi' => 'Resep untuk membuat Burger Sapi 1',
                'created_at' => '2025-11-18 11:25:21',
                'updated_at' => '2025-11-18 11:25:21',
            ],
            [
                'id' => 3,
                'id_cabang' => 1,
                'nama_resep' => 'Resep Burger Sapi 2',
                'produk_id' => 38,
                'deskripsi' => 'Resep untuk membuat Burger Sapi 2',
                'created_at' => '2025-11-18 11:25:21',
                'updated_at' => '2025-11-18 11:25:21',
            ],
            [
                'id' => 4,
                'id_cabang' => 1,
                'nama_resep' => 'Resep Hotdog Sosis Ayam',
                'produk_id' => 35,
                'deskripsi' => 'Resep untuk membuat Hotdog Sosis ayam',
                'created_at' => '2025-11-18 11:25:21',
                'updated_at' => '2025-11-18 11:25:21',
            ],
            [
                'id' => 5,
                'id_cabang' => 1,
                'nama_resep' => 'Resep Hotdog Sosis Sapi',
                'produk_id' => 36,
                'deskripsi' => 'Resep untuk membuat Hotdog Sosis Sapi',
                'created_at' => '2025-11-18 11:25:21',
                'updated_at' => '2025-11-18 11:25:21',
            ],
            [
                'id' => 6,
                'id_cabang' => 1,
                'nama_resep' => 'Resep Kentang Goreng',
                'produk_id' => 39,
                'deskripsi' => 'Resep untuk membuat Kentang Goreng',
                'created_at' => '2025-11-18 11:25:21',
                'updated_at' => '2025-11-18 11:25:21',
            ],
            [
                'id' => 7,
                'id_cabang' => 1,
                'nama_resep' => 'Resep Coca Cola',
                'produk_id' => 40,
                'deskripsi' => 'Resep untuk membuat Coca cola',
                'created_at' => '2025-11-18 11:25:21',
                'updated_at' => '2025-11-18 11:25:21',
            ],
            [
                'id' => 8,
                'id_cabang' => 1,
                'nama_resep' => 'Resep Sprite',
                'produk_id' => 41,
                'deskripsi' => 'Resep untuk membuat Sprite',
                'created_at' => '2025-11-18 11:25:21',
                'updated_at' => '2025-11-18 11:25:21',
            ],
            [
                'id' => 9,
                'id_cabang' => 1,
                'nama_resep' => 'Resep Paket A',
                'produk_id' => 49,
                'deskripsi' => 'Resep untuk membuat Paket A',
                'created_at' => '2025-11-18 11:25:21',
                'updated_at' => '2025-11-18 11:25:21',
            ],
            [
                'id' => 10,
                'id_cabang' => 1,
                'nama_resep' => 'Resep Paket B',
                'produk_id' => 50,
                'deskripsi' => 'Resep untuk membuat Paket B',
                'created_at' => '2025-11-18 11:25:21',
                'updated_at' => '2025-11-18 11:25:21',
            ],
            [
                'id' => 11,
                'id_cabang' => 1,
                'nama_resep' => 'Resep Paket C',
                'produk_id' => 51,
                'deskripsi' => 'Resep untuk membuat Paket C',
                'created_at' => '2025-11-18 11:25:21',
                'updated_at' => '2025-11-18 11:25:21',
            ],
            [
                'id' => 12,
                'id_cabang' => 2,
                'nama_resep' => 'Resep Burger Sapi 1',
                'produk_id' => 52,
                'deskripsi' => 'Resep untuk membuat Burger Sapi 1',
                'created_at' => '2025-11-18 11:25:21',
                'updated_at' => '2025-11-18 11:25:21',
            ],
            [
                'id' => 13,
                'id_cabang' => 2,
                'nama_resep' => 'Resep Burger Sapi 2',
                'produk_id' => 53,
                'deskripsi' => 'Resep untuk membuat Burger Sapi 2',
                'created_at' => '2025-11-18 11:25:21',
                'updated_at' => '2025-11-18 11:25:21',
            ],
            [
                'id' => 14,
                'id_cabang' => 2,
                'nama_resep' => 'Resep Hotdog Sosis Ayam',
                'produk_id' => 54,
                'deskripsi' => 'Resep untuk membuat Hotdog Sosis Ayam',
                'created_at' => '2025-11-18 11:25:22',
                'updated_at' => '2025-11-18 11:25:22',
            ],
            [
                'id' => 15,
                'id_cabang' => 2,
                'nama_resep' => 'Resep Hotdog Sosis Sapi',
                'produk_id' => 55,
                'deskripsi' => 'Resep untuk membuat Hotdog Sosis Sapi',
                'created_at' => '2025-11-18 11:25:22',
                'updated_at' => '2025-11-18 11:25:22',
            ],
            [
                'id' => 16,
                'id_cabang' => 2,
                'nama_resep' => 'Resep Kentang Goreng',
                'produk_id' => 56,
                'deskripsi' => 'Resep untuk membuat Kentang Goreng',
                'created_at' => '2025-11-18 11:25:22',
                'updated_at' => '2025-11-18 11:25:22',
            ],
            [
                'id' => 17,
                'id_cabang' => 2,
                'nama_resep' => 'Resep Coca Cola',
                'produk_id' => 57,
                'deskripsi' => 'Resep untuk membuat Coca Cola',
                'created_at' => '2025-11-18 11:25:22',
                'updated_at' => '2025-11-18 11:25:22',
            ],
            [
                'id' => 18,
                'id_cabang' => 2,
                'nama_resep' => 'Resep Sprite',
                'produk_id' => 58,
                'deskripsi' => 'Resep untuk membuat Sprite',
                'created_at' => '2025-11-18 11:25:22',
                'updated_at' => '2025-11-18 11:25:22',
            ],
            [
                'id' => 19,
                'id_cabang' => 2,
                'nama_resep' => 'Resep Paket A',
                'produk_id' => 59,
                'deskripsi' => 'Resep untuk membuat Paket A',
                'created_at' => '2025-11-18 11:25:22',
                'updated_at' => '2025-11-18 11:25:22',
            ],
            [
                'id' => 20,
                'id_cabang' => 2,
                'nama_resep' => 'Resep Paket B',
                'produk_id' => 60,
                'deskripsi' => 'Resep untuk membuat Paket B',
                'created_at' => '2025-11-18 11:25:22',
                'updated_at' => '2025-11-18 11:25:22',
            ],
            [
                'id' => 21,
                'id_cabang' => 2,
                'nama_resep' => 'Resep Paket C',
                'produk_id' => 61,
                'deskripsi' => 'Resep untuk membuat Paket C',
                'created_at' => '2025-11-18 11:25:22',
                'updated_at' => '2025-11-18 11:25:22',
            ],
            [
                'id' => 22,
                'id_cabang' => 1,
                'nama_resep' => 'Resep Burger Sapi 1',
                'produk_id' => 37,
                'deskripsi' => 'Resep untuk membuat Burger Sapi 1',
                'created_at' => '2025-11-18 11:25:29',
                'updated_at' => '2025-11-18 11:25:29',
            ],
            [
                'id' => 23,
                'id_cabang' => 1,
                'nama_resep' => 'Resep Burger Sapi 2',
                'produk_id' => 38,
                'deskripsi' => 'Resep untuk membuat Burger Sapi 2',
                'created_at' => '2025-11-18 11:25:29',
                'updated_at' => '2025-11-18 11:25:29',
            ],
            [
                'id' => 24,
                'id_cabang' => 1,
                'nama_resep' => 'Resep Hotdog Sosis Ayam',
                'produk_id' => 35,
                'deskripsi' => 'Resep untuk membuat Hotdog Sosis ayam',
                'created_at' => '2025-11-18 11:25:29',
                'updated_at' => '2025-11-18 11:25:29',
            ],
            [
                'id' => 25,
                'id_cabang' => 1,
                'nama_resep' => 'Resep Hotdog Sosis Sapi',
                'produk_id' => 36,
                'deskripsi' => 'Resep untuk membuat Hotdog Sosis Sapi',
                'created_at' => '2025-11-18 11:25:29',
                'updated_at' => '2025-11-18 11:25:29',
            ],
            [
                'id' => 26,
                'id_cabang' => 1,
                'nama_resep' => 'Resep Kentang Goreng',
                'produk_id' => 39,
                'deskripsi' => 'Resep untuk membuat Kentang Goreng',
                'created_at' => '2025-11-18 11:25:29',
                'updated_at' => '2025-11-18 11:25:29',
            ],
            [
                'id' => 27,
                'id_cabang' => 1,
                'nama_resep' => 'Resep Coca Cola',
                'produk_id' => 40,
                'deskripsi' => 'Resep untuk membuat Coca cola',
                'created_at' => '2025-11-18 11:25:29',
                'updated_at' => '2025-11-18 11:25:29',
            ],
            [
                'id' => 28,
                'id_cabang' => 1,
                'nama_resep' => 'Resep Sprite',
                'produk_id' => 41,
                'deskripsi' => 'Resep untuk membuat Sprite',
                'created_at' => '2025-11-18 11:25:29',
                'updated_at' => '2025-11-18 11:25:29',
            ],
            [
                'id' => 29,
                'id_cabang' => 1,
                'nama_resep' => 'Resep Paket A',
                'produk_id' => 49,
                'deskripsi' => 'Resep untuk membuat Paket A',
                'created_at' => '2025-11-18 11:25:29',
                'updated_at' => '2025-11-18 11:25:29',
            ],
            [
                'id' => 30,
                'id_cabang' => 1,
                'nama_resep' => 'Resep Paket B',
                'produk_id' => 50,
                'deskripsi' => 'Resep untuk membuat Paket B',
                'created_at' => '2025-11-18 11:25:29',
                'updated_at' => '2025-11-18 11:25:29',
            ],
            [
                'id' => 31,
                'id_cabang' => 1,
                'nama_resep' => 'Resep Paket C',
                'produk_id' => 51,
                'deskripsi' => 'Resep untuk membuat Paket C',
                'created_at' => '2025-11-18 11:25:29',
                'updated_at' => '2025-11-18 11:25:29',
            ],
            [
                'id' => 32,
                'id_cabang' => 2,
                'nama_resep' => 'Resep Burger Sapi 1',
                'produk_id' => 52,
                'deskripsi' => 'Resep untuk membuat Burger Sapi 1',
                'created_at' => '2025-11-18 11:25:29',
                'updated_at' => '2025-11-18 11:25:29',
            ],
            [
                'id' => 33,
                'id_cabang' => 2,
                'nama_resep' => 'Resep Burger Sapi 2',
                'produk_id' => 53,
                'deskripsi' => 'Resep untuk membuat Burger Sapi 2',
                'created_at' => '2025-11-18 11:25:29',
                'updated_at' => '2025-11-18 11:25:29',
            ],
            [
                'id' => 34,
                'id_cabang' => 2,
                'nama_resep' => 'Resep Hotdog Sosis Ayam',
                'produk_id' => 54,
                'deskripsi' => 'Resep untuk membuat Hotdog Sosis Ayam',
                'created_at' => '2025-11-18 11:25:29',
                'updated_at' => '2025-11-18 11:25:29',
            ],
            [
                'id' => 35,
                'id_cabang' => 2,
                'nama_resep' => 'Resep Hotdog Sosis Sapi',
                'produk_id' => 55,
                'deskripsi' => 'Resep untuk membuat Hotdog Sosis Sapi',
                'created_at' => '2025-11-18 11:25:29',
                'updated_at' => '2025-11-18 11:25:29',
            ],
            [
                'id' => 36,
                'id_cabang' => 2,
                'nama_resep' => 'Resep Kentang Goreng',
                'produk_id' => 56,
                'deskripsi' => 'Resep untuk membuat Kentang Goreng',
                'created_at' => '2025-11-18 11:25:29',
                'updated_at' => '2025-11-18 11:25:29',
            ],
            [
                'id' => 37,
                'id_cabang' => 2,
                'nama_resep' => 'Resep Coca Cola',
                'produk_id' => 57,
                'deskripsi' => 'Resep untuk membuat Coca Cola',
                'created_at' => '2025-11-18 11:25:29',
                'updated_at' => '2025-11-18 11:25:29',
            ],
            [
                'id' => 38,
                'id_cabang' => 2,
                'nama_resep' => 'Resep Sprite',
                'produk_id' => 58,
                'deskripsi' => 'Resep untuk membuat Sprite',
                'created_at' => '2025-11-18 11:25:29',
                'updated_at' => '2025-11-18 11:25:29',
            ],
            [
                'id' => 39,
                'id_cabang' => 2,
                'nama_resep' => 'Resep Paket A',
                'produk_id' => 59,
                'deskripsi' => 'Resep untuk membuat Paket A',
                'created_at' => '2025-11-18 11:25:29',
                'updated_at' => '2025-11-18 11:25:29',
            ],
            [
                'id' => 40,
                'id_cabang' => 2,
                'nama_resep' => 'Resep Paket B',
                'produk_id' => 60,
                'deskripsi' => 'Resep untuk membuat Paket B',
                'created_at' => '2025-11-18 11:25:29',
                'updated_at' => '2025-11-18 11:25:29',
            ],
            [
                'id' => 41,
                'id_cabang' => 2,
                'nama_resep' => 'Resep Paket C',
                'produk_id' => 61,
                'deskripsi' => 'Resep untuk membuat Paket C',
                'created_at' => '2025-11-18 11:25:29',
                'updated_at' => '2025-11-18 11:25:29',
            ],
        ];

        foreach ($data as $item) {
            Resep::updateOrCreate(
                ['id' => $item['id']],
                $item
            );
        }

        // Seed Resep Items (bahan baku untuk setiap resep)
        $this->seedResepItems();

        $this->command->info('Resep berhasil di-seed!');
    }

    private function seedResepItems()
    {
        // Mapping bahan baku (ID => nama)
        // Burger Sapi 1 (ID resep: 2, produk: 37)
        $resepBurgerSapi1 = Resep::find(2);
        if ($resepBurgerSapi1) {
            $resepBurgerSapi1->items()->delete(); // Hapus items lama jika ada
            $resepBurgerSapi1->items()->createMany([
                ['bahan_baku_id' => 2, 'qty' => 1],      // roti burger: 1 pcs
                ['bahan_baku_id' => 4, 'qty' => 100],    // Daging Sapi: 100 gram
                ['bahan_baku_id' => 7, 'qty' => 20],     // Selada: 20 gram
                ['bahan_baku_id' => 8, 'qty' => 30],     // Tomat: 30 gram
                ['bahan_baku_id' => 10, 'qty' => 20],    // Saus Mayonaise: 20 ml
                ['bahan_baku_id' => 11, 'qty' => 15],    // Saus Tomat: 15 ml
            ]);
        }

        // Burger Sapi 2 (ID resep: 3, produk: 38)
        $resepBurgerSapi2 = Resep::find(3);
        if ($resepBurgerSapi2) {
            $resepBurgerSapi2->items()->delete();
            $resepBurgerSapi2->items()->createMany([
                ['bahan_baku_id' => 2, 'qty' => 1],      // roti burger: 1 pcs
                ['bahan_baku_id' => 4, 'qty' => 100],    // Daging Sapi: 100 gram
                ['bahan_baku_id' => 6, 'qty' => 1],      // Keju Slice: 1 pcs
                ['bahan_baku_id' => 7, 'qty' => 20],     // Selada: 20 gram
                ['bahan_baku_id' => 8, 'qty' => 30],     // Tomat: 30 gram
                ['bahan_baku_id' => 10, 'qty' => 20],    // Saus Mayonaise: 20 ml
                ['bahan_baku_id' => 11, 'qty' => 15],    // Saus Tomat: 15 ml
            ]);
        }

        // Hotdog Sosis Ayam (ID resep: 4, produk: 35)
        $resepHotdogAyam = Resep::find(4);
        if ($resepHotdogAyam) {
            $resepHotdogAyam->items()->delete();
            $resepHotdogAyam->items()->createMany([
                ['bahan_baku_id' => 18, 'qty' => 1],     // Roti Hotdog: 1 pcs
                ['bahan_baku_id' => 19, 'qty' => 1],     // Sosis Ayam: 1 pcs
                ['bahan_baku_id' => 10, 'qty' => 15],    // Saus Mayonaise: 15 ml
                ['bahan_baku_id' => 11, 'qty' => 10],    // Saus Tomat: 10 ml
                ['bahan_baku_id' => 12, 'qty' => 10],    // Saus Sambal: 10 ml
            ]);
        }

        // Hotdog Sosis Sapi (ID resep: 5, produk: 36)
        $resepHotdogSapi = Resep::find(5);
        if ($resepHotdogSapi) {
            $resepHotdogSapi->items()->delete();
            $resepHotdogSapi->items()->createMany([
                ['bahan_baku_id' => 18, 'qty' => 1],     // Roti Hotdog: 1 pcs
                ['bahan_baku_id' => 20, 'qty' => 1],     // Sosis Sapi: 1 pcs
                ['bahan_baku_id' => 10, 'qty' => 15],    // Saus Mayonaise: 15 ml
                ['bahan_baku_id' => 11, 'qty' => 10],    // Saus Tomat: 10 ml
                ['bahan_baku_id' => 12, 'qty' => 10],    // Saus Sambal: 10 ml
            ]);
        }

        // Kentang Goreng (ID resep: 6, produk: 39)
        $resepKentang = Resep::find(6);
        if ($resepKentang) {
            $resepKentang->items()->delete();
            $resepKentang->items()->createMany([
                ['bahan_baku_id' => 16, 'qty' => 300],   // Kentang: 300 gram
                ['bahan_baku_id' => 15, 'qty' => 50],    // Minyak Goreng: 50 ml
                ['bahan_baku_id' => 17, 'qty' => 5],     // Garam: 5 gram
            ]);
        }

        // Coca Cola (ID resep: 7, produk: 40)
        $resepCocaCola = Resep::find(7);
        if ($resepCocaCola) {
            $resepCocaCola->items()->delete();
            $resepCocaCola->items()->createMany([
                ['bahan_baku_id' => 21, 'qty' => 400],   // Coca Cola: 400 ml
                ['bahan_baku_id' => 23, 'qty' => 200],   // Es Batu: 200 gram
            ]);
        }

        // Sprite (ID resep: 8, produk: 41)
        $resepSprite = Resep::find(8);
        if ($resepSprite) {
            $resepSprite->items()->delete();
            $resepSprite->items()->createMany([
                ['bahan_baku_id' => 22, 'qty' => 350],   // Sprite: 350 ml
                ['bahan_baku_id' => 23, 'qty' => 200],   // Es Batu: 200 gram
            ]);
        }

        // Paket A (ID resep: 9, produk: 49) - Burger Sapi 1 + Kentang + Minuman
        $resepPaketA = Resep::find(9);
        if ($resepPaketA) {
            $resepPaketA->items()->delete();
            $resepPaketA->items()->createMany([
                // Burger Sapi 1
                ['bahan_baku_id' => 2, 'qty' => 1],      // roti burger
                ['bahan_baku_id' => 4, 'qty' => 100],    // Daging Sapi
                ['bahan_baku_id' => 7, 'qty' => 20],     // Selada
                ['bahan_baku_id' => 8, 'qty' => 30],     // Tomat
                ['bahan_baku_id' => 10, 'qty' => 20],    // Saus Mayonaise
                ['bahan_baku_id' => 11, 'qty' => 15],    // Saus Tomat
                // Kentang Goreng
                ['bahan_baku_id' => 16, 'qty' => 300],   // Kentang
                ['bahan_baku_id' => 15, 'qty' => 50],    // Minyak Goreng
                ['bahan_baku_id' => 17, 'qty' => 5],     // Garam
                // Minuman (Coca Cola)
                ['bahan_baku_id' => 21, 'qty' => 400],   // Coca Cola
                ['bahan_baku_id' => 23, 'qty' => 200],   // Es Batu
            ]);
        }

        // Paket B (ID resep: 10, produk: 50) - Hotdog Ayam + Kentang + Minuman
        $resepPaketB = Resep::find(10);
        if ($resepPaketB) {
            $resepPaketB->items()->delete();
            $resepPaketB->items()->createMany([
                // Hotdog Sosis Ayam
                ['bahan_baku_id' => 18, 'qty' => 1],     // Roti Hotdog
                ['bahan_baku_id' => 19, 'qty' => 1],     // Sosis Ayam
                ['bahan_baku_id' => 10, 'qty' => 15],    // Saus Mayonaise
                ['bahan_baku_id' => 11, 'qty' => 10],    // Saus Tomat
                ['bahan_baku_id' => 12, 'qty' => 10],    // Saus Sambal
                // Kentang Goreng
                ['bahan_baku_id' => 16, 'qty' => 300],   // Kentang
                ['bahan_baku_id' => 15, 'qty' => 50],    // Minyak Goreng
                ['bahan_baku_id' => 17, 'qty' => 5],     // Garam
                // Minuman (Sprite)
                ['bahan_baku_id' => 22, 'qty' => 350],   // Sprite
                ['bahan_baku_id' => 23, 'qty' => 200],   // Es Batu
            ]);
        }

        // Paket C (ID resep: 11, produk: 51) - Burger Sapi 2 + Kentang + Minuman
        $resepPaketC = Resep::find(11);
        if ($resepPaketC) {
            $resepPaketC->items()->delete();
            $resepPaketC->items()->createMany([
                // Burger Sapi 2
                ['bahan_baku_id' => 2, 'qty' => 1],      // roti burger
                ['bahan_baku_id' => 4, 'qty' => 100],    // Daging Sapi
                ['bahan_baku_id' => 6, 'qty' => 1],      // Keju Slice
                ['bahan_baku_id' => 7, 'qty' => 20],     // Selada
                ['bahan_baku_id' => 8, 'qty' => 30],     // Tomat
                ['bahan_baku_id' => 10, 'qty' => 20],    // Saus Mayonaise
                ['bahan_baku_id' => 11, 'qty' => 15],    // Saus Tomat
                // Kentang Goreng
                ['bahan_baku_id' => 16, 'qty' => 300],   // Kentang
                ['bahan_baku_id' => 15, 'qty' => 50],    // Minyak Goreng
                ['bahan_baku_id' => 17, 'qty' => 5],     // Garam
                // Minuman (Coca Cola)
                ['bahan_baku_id' => 21, 'qty' => 400],   // Coca Cola
                ['bahan_baku_id' => 23, 'qty' => 200],   // Es Batu
            ]);
        }

        // Resep untuk Cabang Lombok (ID 12-21)
        // Menggunakan bahan baku dari cabang Lombok
        $this->seedResepItemsLombok();
    }

    private function seedResepItemsLombok()
    {
        // Untuk Lombok, kita perlu mapping bahan baku Lombok
        // Untuk sementara, kita skip atau bisa di-implement nanti
        // Karena struktur sama, hanya beda ID bahan baku
    }
}
